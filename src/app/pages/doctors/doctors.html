<div class="doctors-page">
  <div class="doctors-header">
    <a class="back" routerLink="/">← Back to home</a>
    <h1>Matched doctors</h1>
    <p>Choose a doctor and book an appointment.</p>
  </div>
  <div class="doctors-grid">
    @for (doctor of doctors(); track doctor.id) {
      <article class="doctor-card">
        <div class="card-body">
          <div class="avatar">{{ getInitials(doctor.name) }}</div>
          <h3>{{ doctor.name }}</h3>
          <p class="specialty">{{ doctor.specialty }}</p>
          <p class="qualification">{{ doctor.qualification }}</p>
          <p class="experience">{{ doctor.experience }} experience</p>
          <div class="rating">★ {{ doctor.rating }}</div>
       
        
@if (doctor.slots && doctor.slots.length) {
  <div class="slots">
    <div class="slots-header">
      <span>Available Appointments</span>
      <span class="slot-count">
        {{ doctor.slots.length }} slots
      </span>
    </div>

    @for (group of groupSlotsByDate(doctor.slots); track group.date) {
      <div class="date-group">
        <div class="date-label">
          {{ group.date }}
        </div>

        <div class="time-grid">
          @for (slot of group.slots; track slot.id) {
            <button
              type="button"
              class="time-pill"
              [class.selected]="selectedSlotId() === slot.id"
              (click)="selectSlot(doctor.id, slot.id)"
            >
              {{ slot.slot_time }}
            </button>
          }
        </div>
      </div>
    }
  </div>
}



        </div>
        <a [routerLink]="['/book-appointment', doctor.id]" class="btn-book">Book appointment</a>
      </article>
    }
  </div>
  @if (doctors().length === 0) {
    <p class="empty">No matched doctors yet. Use the chat to describe your symptoms and we’ll suggest doctors.</p>
    <a routerLink="/chat" class="link-chat">Go to chat</a>
  }
</div>
